<!DOCTYPE html>
<html lang="en">
    {% load staticfiles %}
    <link href="{{ STATIC_URL }}min/plugin-min.css" type="text/css" rel="stylesheet">
    <link href="{{ STATIC_URL }}min/custom-min.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/materialize.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel=""/>
    <title></title>
    <style>
        label.choice {
            font-size: 20px;
        }

        .card-content {
            font-size: 40px;
        }

        .question_card {
            font-size: 40px;
        }

        .chip {
            position: relative;
        }
        .nav-wrapper{

        }

        .chip_holder {
            position: fixed;
            top: 150px;
            right: 50px;
        }

        .container {
            position: absolute;
            left: 30%;
        }
        #timer{
            position:fixed;
            right: 50px;
        }

        #site_suggestions {
        / / display : none;
            top: 100px;
            right: 50px;
        }

    </style>
    <script type="text/javascript">
    var ended=0;
        skills_reco={"JavaScript": ["http://www.w3schools.com/js/","http://www.djsoutsourcing.com/js/wp-content/uploads/2015/10/javascript-Djs-Outsourcing.png"],
			 "Apache": ["http://httpd.apache.org/docs/2.0/misc/tutorials.html",
						"http://ocean.infoproject.biz/ip/wp-content/uploads/2015/06/apache-logo.png"],
			"PHP: Hypertext Preprocessor":["http://www.w3schools.com/php/","http://www.fuctura.com.br/wp-content/uploads/2011/09/php-elephant.jpg"],
			  "Structured Query Language SQL":    ["http://www.tutorialspoint.com/sql/",
						"http://divinitycomputing.com/wp-content/uploads/2015/12/mysql-logo.png"],
		"Storage Servers": ["http://mymediaexperience.com/nas-storage-guide/",
							"http://www.amsstorage.com/images/WinStore2012R2_logo.png"],
					"C": ["http://www.tutorialspoint.com/cprogramming/",
							"http://myzone.programiz.netdna-cdn.com/sites/tutorial2program/files/c-logo.png"],
					"C++": ["http://www.tutorialspoint.com/cplusplus/",
							"http://www.brandsoftheworld.com/sites/default/files/styles/logo-thumbnail/public/042014/c_0.png?itok=NGrw5nRV"],
					"C#":	["http://www.tutorialspoint.com/csharp/",
								"http://dribbble.s3.amazonaws.com/users/3777/screenshots/374791/c-dribbble_v2.png"],
					"COBOL": ["http://www.tutorialspoint.com/cobol/",
								"https://assets.toptal.io/uploads/blog/category/logo/118/logos-004__2_.png"],
					"Citrix": ["http://training.citrix.com/cms/index.php?cID=171",
								"http://cdn1.itpro.co.uk/sites/itpro/files/styles/gallery/public/images/dir_208/it_photo_104482.jpg?itok=s3YZKKdr"],
					"Ruby on Rails":["http://www.tutorialspoint.com/ruby-on-rails/",
									"https://upload.wikimedia.org/wikipedia/en/thumb/e/e9/Ruby_on_Rails.svg/791px-Ruby_on_Rails.svg.png"],
					"jQuery" : ["http://www.w3schools.com/jquery/","http://www.codeforest.net/wp-content/uploads/2011/01/jquery-logo.jpg"],
					"IBM Tools" : ["http://www.ibm.com/developerworks/training/",
									"http://core0.staticworld.net/images/article/2015/01/012615blog-ibm-logo-100564825-primary.idge.jpg"],
					"Network Systems" : ["http://www.tutorialspoint.com/computer_fundamentals/computer_networking.htm",
											"http://icenetworksystems.com/wp-content/themes/ice/images/simple_text_img_1.jpg"],
					"Cisco Systems Software" :["http://www.cisco.com/E-Learning/public/shared/pdf/Cview_Tutorial_Final.pdf",
												"https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Cisco_logo.svg/2000px-Cisco_logo.svg.png"],
					"Adobe Systems Software" : ["http://training.adobe.com/training.html",
												"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Adobe_Systems_logo_and_wordmark.svg/2000px-Adobe_Systems_logo_and_wordmark.svg.png"],
					"Adobe Acrobat Tutorials" : ["https://helpx.adobe.com/acrobat/tutorials.html",
												" https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Adobe_Acrobat_v8.0_icon.svg/2000px-Adobe_Acrobat_v8.0_icon.svg.png"],
					"Drupal"				  :	["https://www.siteground.com/tutorials/drupal/",
												" https://www.codeguard.com/images/logo_drupal.svg"],
					"IBM Websphere"           : ["http://www.inventateq.com/ibm-websphere-application-server-Training-Bangalore.php",
												"http://maxsoftsolutions.in/Maxsoft_Pages/wp-content/uploads/2013/12/ibm-websphere-online-training.jpg"],
					"Adobe Dreamweaver"       :	["https://helpx.adobe.com/dreamweaver/tutorials.html",
												"https://upload.wikimedia.org/wikipedia/commons/7/72/Adobe_Dreamweaver_CS6_Icon.png"],
					"Apache Tomcat"           : ["http://www.vogella.com/tutorials/ApacheTomcat/article.html",
												"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Tomcat-logo.svg/500px-Tomcat-logo.svg.png"],
					"Hypertext markup language HTML": ["http://www.w3schools.com/html/",
												 "http://aankfm.com/wp-content/uploads/2015/09/HTML-tutorial.png"],
					"Python"                   : ["https://docs.python.org/2/tutorial/",
													"https://www.python.org/static/opengraph-icon-200x200.png"],
					"PERL"                      : ["http://www.tutorialspoint.com/perl/",
													"http://www.webindiasolutions.com/blog/wp-content/uploads/2015/01/what-is-perl-programming11.gif"],
					"SAP Tools"                 : ["http://www.tutorialspoint.com/sap_mm/",
														"http://www.techcentral.ie/wp-content/uploads/2014/10/SAP_logo_web-620x350.jpg"],
					"Macintosh"                 : ["http://www.macforbeginners.com/",
													"https://upload.wikimedia.org/wikipedia/en/b/b9/MacOS_original_logo.svg"],
					"DOS"                        :["http://www.techiwarehouse.com/engine/21e82a84/DOS-Tutorial:-The-Basics",
													"http://www.betaarchive.co.uk/imageupload/1223913231.or.63669.png"],
					"AutoCAD"                    :["http://www.cad-notes.com/autocad-articles/",
													"https://justonyx.files.wordpress.com/2015/03/autocad-logo.jpg"],
					"Verilog"                    :["http://www.asic-world.com/verilog/veritut.html",
													"http://www.verilog.com/img/verilog.gif"],
					"Linux"                      :["http://www.tutorialspoint.com/listtutorials/linux/1",
												   "http://www.extremetech.com/wp-content/uploads/2012/01/linux.jpg"],
					"R"                          : ["http://www.tutorialspoint.com/r/",
													"https://www.rstudio.com/wp-content/uploads/2014/06/RStudio-Ball.png"],
					"Microsoft Visual C#"        : ["https://msdn.microsoft.com/en-us/library/aa288436%28v=vs.71%29.aspx",
													"http://itcontrol-ksa.com/wp-content/uploads/2015/08/c.png"],
					"Cascading Style Sheets CSS"                         :["http://www.w3schools.com/css/",
													"http://rigor.com/wp-content/uploads/2015/12/CSS.png"],
					"CorelDraw Graphics Suite"    : ["http://www.entheosweb.com/tutorials/coreldraw/default.asp",
													"http://jasa-download.com/wp-content/uploads/2014/09/corldrw.png"],
					"XML"                         : ["http://www.w3schools.com/xml/",
														"http://pdfextractoronline.com/wp-content/uploads/sites/26/2016/03/Collection-of-XML-documents.png"],
					"Adobe Photoshop"             : ["https://helpx.adobe.com/photoshop/tutorials.html",
														"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Adobe_Photoshop_CS6_icon.svg/2000px-Adobe_Photoshop_CS6_icon.svg.png"],

					"Oracle"					  : ["http://www.tutorialspoint.com/listtutorials/oracle/1",
														"http://fullhdpictures.com/wp-content/uploads/2016/02/Oracle-Logos.png"],

					"Microsoft Office"				: ["http://www.gcflearnfree.org/office",
														"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/2000px-Microsoft_logo.svg.png"],

					"ERP System"					:["http://www.tutorialspoint.com/management_concepts/enterprise_resource_planning.htm",
														"http://www.keysoft.ro/wp-content/uploads/2011/12/erp-logo.png"],

					"Microsoft Visual Basic"		:["http://www.tutorialized.com/tutorials/Visual-Basic/1",
														"https://upload.wikimedia.org/wikipedia/commons/f/f9/Visual_Basic_for_Applications_logo_and_wordmark.svg"],
					"SQL"                           :["http://www.tutorialspoint.com/sql/","http://4.bp.blogspot.com/--Z47AygFgro/Tgt5chuuhyI/AAAAAAAAY-c/RF6Wzj4tYnA/s1600/Mysql_Logo2.png"],

					"CAD Software"					:["http://www.cadtutor.net/tutorials/",
														"http://scvrd.mrooms.net/file.php/1/program_logos/Computer-Aided-Drafting-Geographic-Information-Sustems.gif"],

					"MATLAB"						:["http://www.tutorialspoint.com/matlab/",
														"http://www.fil.ion.ucl.ac.uk/spm/images/matlab.png"],

					"Microsoft .NET Frameworks"		:["http://vb.net-informations.com/framework/framework_tutorials.htm",
														"http://1.bp.blogspot.com/-XvjzTLwUqbs/VOZItaU1PTI/AAAAAAAAAVY/Ds-jHBRcFTQ/s1600/net%2Bframework%2B4.5.png"],

					"Apache Hadoop"				:["https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html",
														"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Hadoop_logo.svg/664px-Hadoop_logo.svg.png"],

					"ALGOL"							:["http://groups.engin.umd.umich.edu/CIS/course.des/cis400/algol/algol.html",
														"http://www.conversant.fi/images/logo_algol.gif"],
					"NoSQL"                     :["http://www.w3resource.com/mongodb/nosql.php","https://www.webair.com/wp-content/themes/webair_bm/images/logos/nosql.png"],

					"Oracle Java"							:["http://www.tutorialspoint.com/java/",
														"https://upload.wikimedia.org/wikipedia/en/8/88/Java_logo.png"],

					"Extensible markup language XML"							:["http://www.w3schools.com/xml/",
														"marcotello.com/wp-content/uploads/2014/01/xml-logo.png"],

					"Microsoft Visual C#"			:["http://csharp.net-tutorials.com/basics/visual-csharp-express/",
														"http://blog.decarufel.net/wp-content/uploads/2014/07/csharp-logo.png"],

					"Apache Tomcat"					:["http://www.vogella.com/tutorials/ApacheTomcat/article.html",
														"http://www.userlogos.org/files/logos/fernandosantucci/logo.apache.tomcat.jpg"],

					"HTML"							:["http://www.tutorialspoint.com/html/",
														"https://www.returngis.net/wp-content/uploads/2013/05/HTML-logo.jpg"],

					"Microsoft Windows"				:["http://windows.microsoft.com/en-in/windows/windows-basics-all-topics#1TC=windows-7",
														"http://www.computilize.com/wp-content/uploads/2012/08/Microsoft_Old_Logo.jpg"],

					"Python"						:["http://www.tutorialspoint.com/python/",
														"http://www.dexterindustries.com/wp-content/uploads/2013/04/python-logo.png"],

					"PERL"							:["http://www.tutorialspoint.com/perl/",
														"https://www.buycpanel.com/wp-content/uploads/2015/07/perl-language-logo.png"],

					"SAP Tools"						:["http://www.tutorialspoint.com/sap/index.htm",
														"http://siliconangle.com/files/2013/05/sap-logo.jpg"],

					"Autodesk"						:["https://www.lynda.com/Autodesk-training-tutorials/107-0.html",
														"http://technoland.co.id/wp-content/uploads/2015/10/Autodesk-Logo.png"],

					"IBM Tools"						:["https://www.ibm.com/developerworks/tivoli/tutorials/",
														"http://core0.staticworld.net/images/article/2015/01/012615blog-ibm-logo-100564825-primary.idge.jpg"],

					"Networks Systems"				:["http://www.tutorialspoint.com/data_communication_computer_network/",
														"http://www.winmill.com/UploadedImages/cisco_systems_logo_2796.gif"],

					"Adobe Dreamweaver"				:["http://www.tutorialspoint.com/listtutorials/dreamweaver/1",
														"http://getintopc.com/wp-content/uploads/2014/02/Dewamweaver_CS53.png"],

					"Delphi software"				:["http://www.tutorialspoint.com/listtutorials/delphi/1",
														"http://meautoparts.co.uk/images/Delphi_Logo.jpg"]


					};
        function shuffle(array) {
                  var currentIndex = array.length, temporaryValue, randomIndex;

                  // While there remain elements to shuffle...
                  while (0 !== currentIndex) {

                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    // And swap it with the current element.
                    temporaryValue = array[currentIndex];
                    array[currentIndex] = array[randomIndex];
                    array[randomIndex] = temporaryValue;
                  }

                  return array;
                }
        jQuery(window).on('beforeunload', function()
        {
            alert('Leaving this page will lose your changes. Are you sure?');
        });

        questions=[];
        {% for question in questions %}
            question=[];
            question["skill"]='{{ question.skill }}';
            question["question"]='{{ question.question }}';
            question["choices"]=[];
            {% for choice in question.choices %}
                question["choices"].push('{{ choice }}');
            {% endfor %}

            question["correct"]='{{ question.correct }}';
            questions.push(question);

        {% endfor %}


        quiz=shuffle(questions).slice(0,5);
        var currentQuestion = 0, score = 0, wrong_index = 0, submt = true, picked;
        var wrong = new Array();
        //adding the choices dynamically
        function init(minutes) {
            var seconds = 60;
            var mins = minutes;

            function tick() {
                var counter = document.getElementById("timer");
                var current_minutes = mins - 1;
                seconds--;
                counter.innerHTML = "Time Left = " + current_minutes.toString() + ":" + (seconds < 10 ? "0" : "") + String(seconds);
                if (seconds > 0) {
                    setTimeout(tick, 1000);
                }
                else {
                    if (mins > 1) {
                        setTimeout(function () {
                            countdown(min - 1);
                        })
                    }
                }
                if (current_minutes <= 0 && seconds <= 0) {
                    alert("Timeout!");
                    if(ended==0) {
                        endQuiz();
                    }
                }
            }

            tick();
            addChoices(quiz[currentQuestion]['choices']);
        }
        function getRadioValue(theRadioGroup) {
            var elements = document.getElementsByName(theRadioGroup);
            for (var i = 0, l = elements.length; i < l; i++) {
                if (elements[i].checked) {
                    return elements[i].value;
                }
            }
        }
        function addChoices(choices) {
            $('.question_card').text(quiz[currentQuestion]['question']);
            $('.card-title').text(quiz[currentQuestion]['skill']);

            $('label[for=test1]').html(choices[0]);
            document.getElementById("test1").value = choices[0];

            $('label[for=test2]').html(choices[1]);
            document.getElementById("test2").value = choices[1];

            $('label[for=test3]').html(choices[2]);
            document.getElementById("test3").value = choices[2];

            $('label[for=test4]').html(choices[3]);
            document.getElementById("test4").value = choices[3];
            setupButtons();
        }
        function nextQuestion() {
            submt = true;
            /*$('.question_card').text(quiz[currentQuestion]['question']);
             $('.card-title').text(quiz[currentQuestion]['skill']);
             addChoices(quiz[currentQuestion]['choices']);*/
            //clearing the radio button selection
            //added now from here:
            $('.response_from_server').html('');
            $('input[name=group1]').attr('checked', false);
            //resetting the questions
            $('.question_card').text(quiz[currentQuestion]['question']);
            $('.card-title').text(quiz[currentQuestion]['skill']);
            //resetting the choices
            addChoices(quiz[currentQuestion]['choices']);
        }
        function setupButtons() {
            if (submt) {
                submt = false;
                $('input[name=group1]').on('click', function () {
                    //alert("clicked!");
                    picked = getRadioValue("group1");
                    //alert(picked);
                });
                $('#btn').on('click', function () {
                    $('.choice').off('click');
                    $(this).off('click');
                    processQuestion(picked);
                })
            }
        }
        function processQuestion(choice) {
            if (picked == quiz[currentQuestion]['correct']) {
                score++;
                //$('.response_from_server').text("CORRECT!");
                //alert("correct");
            }
            else {
                // alert("incorrect");
                //$('.response_from_server').text("INCORRECT!");
                wrong[wrong_index] = quiz[currentQuestion]['skill'];
                wrong_index++;
            }
            currentQuestion++;
            if (currentQuestion == quiz.length) {
                endQuiz();
            }
            else {
                $(this).off('click');
                nextQuestion();
            }
        }
        function endQuiz() {
            $('.question_card').empty();
            $('.card-title').remove();
            $('.response_from_server').remove();
            ended=1;


            $('.question_card').text("You got " + score + " out of " + quiz.length + " correct.");
            $(document.createElement('h2')).css({
                'text-align': 'center',
                'font-size': '4em'
            }).text(Math.round(score / quiz.length * 100) + '%').insertAfter('.question_card');

            var list = document.getElementsByClassName("Rbuttons");
            for (var i = list.length - 1; 0 <= i; i--)
                if (list[i] && list[i].parentElement)
                    list[i].parentElement.removeChild(list[i]);
            //alert(wrong);
            //document.getElementById("site_suggestions").style.display = "block";
            //$('#site_suggestions').css("display", "block");
            added=new Set();
            for (var v = 0; v < wrong.length; v++) {
                if(added.has(wrong[v]))
                    continue;
                added.add(wrong[v]);

                var wrong_list = skills_reco[wrong[v]];
                //alert(wrong_list);
                holder_list = document.getElementsByClassName("chip_holder");
                holder = holder_list[0];
                new_div = document.createElement("div");
                new_div.innerHTML = wrong[v];
                new_div.className = "chip";
                holder.appendChild(new_div);
                //alert("appened child!");
                new_a = document.createElement("a");
                new_a.setAttribute("href", wrong_list[0]);
                new_div.appendChild(new_a);
                new_img = document.createElement("img");
                new_img.setAttribute("src", wrong_list[1]);
                new_a.appendChild(new_img);

                if ((v + 1) % 2 == 0) {
                holder.appendChild(document.createElement("br"));
                holder.appendChild(document.createElement("p"));
            }

            }
            $('#btn').on('click', function () {
                    document.getElementById("score").value=Math.round(score / quiz.length * 100);
                    document.getElementById("nigga").click();
                });
//document.getElementById("nigga").click

            //$('.chip').css("display","block");
        }

    </script>
</head>
<body onload="init(1)"> <!--CHANGE THIS LATER ON-->

<nav>
    <div class="nav-wrapper teal lighten-2">
        <a href="#" class="brand-logo">JustTheJob</a>

        <div id="timer" class="fixed" align="right" style="width:1200px; font-size:120%;"> Time Left</div>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
        </ul>
    </div>
</nav>

<div class="container">
    <div class="row">
        <div class="col s14 m7">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">Question</span>

                    <p><span class="question_card">The question comes here</span></p>

                    <p><span class="response_from_server"></span></p>
                </div>
            </div>
        </div>
    </div>
    <!-- radio buttons-->
    <!-- put all this in a form after this, when shifted to server side -->
    <p class="Rbuttons">
        <input name="group1" type="radio" id="test1" value=""/>
        <label class="choice" for="test1"></label>
    </p>

    <p class="Rbuttons">
        <input name="group1" type="radio" id="test2" value=""/>
        <label class="choice" for="test2"></label>
    </p>

    <p class="Rbuttons">
        <input name="group1" type="radio" id="test3" value=""/>
        <label class="choice" for="test3"></label>
    </p>

    <p class="Rbuttons">
        <input name="group1" type="radio" id="test4" value=""/>
        <label class="choice" for="test4"></label>
    </p>
    <button class="btn waves-effect waves-light" id="btn" type="submit" name="action">
        <i class="material-icons">send</i></button>
</div>

<div class="chip_holder">

</div>

<!--ending radio options-->

<form method="POST" action="test" style="display: none" id="forme">
    <input type="hidden" name="type" value="quiz"/>
    <input type="hidden" name="score" value="0" id="score"/>
    <input type="hidden" name="job_id" value="{{ job_id }}">
    <button type="submit" class="btn waves-effect waves-light" id="nigga" >DONE</button>
</form>

</body>
</html>